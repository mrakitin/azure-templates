jobs:
- job: install_services
  displayName: Install services and needed apt-packages
  steps:
  - script: git status
    displayName: check git status
  - script: sudo apt-get install mongodb
    displayName: install mongodb
  - script: sudo systemctl start mongodb && sudo systemctl status mongodb
    displayName: start mongodb
  - script: sudo apt-get install xvfb
    displayName: install xvfb
  # from https://developercommunity.visualstudio.com/content/problem/336288/headless-testing-using-xvfb-on-hosted-ubuntu-1604.html
  - script: /sbin/start-stop-daemon --start --quiet --pidfile /tmp/custom_xvfb_99.pid --make-pidfile --background --exec /usr/bin/Xvfb -- :99 -ac -screen 0 1280x1024x16
    displayName: start xvfb
  - script: sudo apt-get install qtbase5-dev
    displayName: install qtbase5-dev

